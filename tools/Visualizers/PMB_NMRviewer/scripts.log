////////////////////////////////////////////////////////////////////////

INSTALLATION

////////////////////////////////////////////////////////////////////////


[djacob@proticdb projets]$ 
[djacob@proticdb projets]$ pwd
/mnt/var/sys/projets
[djacob@proticdb projets]$ 
[djacob@proticdb projets]$ ll ./nmrview.tar.gz 
-rw-r--r-- 1 djacob users 20401644 Mar 26 15:44 ./nmrview.tar.gz

[djacob@proticdb projets]$ tar xvzf ./nmrview.tar.gz 
./nmrview/
./nmrview/www/
./nmrview/www/tmp
./nmrview/www/js/
./nmrview/www/js/spectrum.js
./nmrview/www/js/ui.nmrview.js
./nmrview/www/js/utils.js
./nmrview/www/etc
./nmrview/www/images/
./nmrview/www/images/img_00.gif
./nmrview/www/images/loading.gif
./nmrview/www/php/
./nmrview/www/php/Set_Config.inc
./nmrview/www/php/config.inc
./nmrview/www/php/getnmrspec.inc
./nmrview/www/php/main.inc
./nmrview/www/php/nmrproc_conf.inc
./nmrview/www/php/nmrproc_ui.inc
./nmrview/www/php/nmrproc_view.inc
./nmrview/www/.htaccess
./nmrview/www/css/
./nmrview/www/css/redmond/
./nmrview/www/css/redmond/images/
./nmrview/www/css/redmond/images/ui-icons_217bc0_256x240.png
./nmrview/www/css/redmond/images/animated-overlay.gif
./nmrview/www/css/redmond/images/ui-bg_gloss-wave_55_5c9ccc_500x100.png
./nmrview/www/css/redmond/images/ui-bg_flat_0_aaaaaa_40x100.png
./nmrview/www/css/redmond/images/ui-bg_flat_55_fbec88_40x100.png
./nmrview/www/css/redmond/images/ui-bg_glass_75_d0e5f5_1x400.png
./nmrview/www/css/redmond/images/ui-bg_glass_85_dfeffc_1x400.png
./nmrview/www/css/redmond/images/ui-bg_glass_95_fef1ec_1x400.png
./nmrview/www/css/redmond/images/ui-bg_inset-hard_100_f5f8f9_1x100.png
./nmrview/www/css/redmond/images/ui-bg_inset-hard_100_fcfdfd_1x100.png
./nmrview/www/css/redmond/images/ui-icons_2e83ff_256x240.png
./nmrview/www/css/redmond/images/ui-icons_469bdd_256x240.png
./nmrview/www/css/redmond/images/ui-icons_6da8d5_256x240.png
./nmrview/www/css/redmond/images/ui-icons_cd0a0a_256x240.png
./nmrview/www/css/redmond/images/ui-icons_d8e7f3_256x240.png
./nmrview/www/css/redmond/images/ui-icons_f9bd01_256x240.png
./nmrview/www/css/redmond/jquery-ui.min.css
./nmrview/www/css/redmond/jquery-ui.css
./nmrview/www/css/redmond/jquery.ui.theme.css
./nmrview/www/view
./nmrview/www/log/
./nmrview/www/log/tracing/
./nmrview/www/log/access.log
./nmrview/www/view.php
./nmrview/www/simple.html
./nmrview/etc/
./nmrview/etc/nmrproc.conf
./nmrview/bin/
./nmrview/bin/corrige_1r
./nmrview/bin/pack_1r
./nmrview/bin/bin4gp_1r
./nmrview/scripts/
./nmrview/scripts/geoloc_check.sh
./nmrview/scripts/init_bin.sh
./nmrview/scripts/parserJCAMP
./nmrview/scripts/init_dx.sh
./nmrview/scripts/parserJCAMP.pl
./nmrview/scripts/parserBruker
./nmrview/scripts/buildcsv.sh
./nmrview/data/
./nmrview/data/HUGO07/
./nmrview/data/HUGO07/isatab/
./nmrview/data/HUGO07/isatab/i_Investigation.txt
./nmrview/data/HUGO07/isatab/s_Hugo_2007.txt
./nmrview/data/HUGO07/isatab/a_hugo_2007_metabolite profiling_NMR spectroscopy.txt
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13091.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13092.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13101.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13102.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13111.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13112.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13121.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13122.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13131.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13132.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13141.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13142.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13151.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13152.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13161.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13162.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13171.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13172.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13181.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13182.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13191.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13192.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13201.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13202.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13331.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13332.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13341.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13342.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13351.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13352.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13361.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13362.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13371.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13372.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13381.zip
./nmrview/data/HUGO07/isatab/BB_BBI_08M07_melon07_13382.zip
./nmrview/data/HUGO07/procs/
./nmrview/tmp/

[djacob@proticdb projets]$ cd nmrview

[djacob@proticdb nmrview]$ ll
total 24
drwxr-xr-x 2 djacob users 4096 Mar 26 15:13 bin
drwxr-xr-x 3 djacob users 4096 Mar 26 14:55 data
drwxr-xr-x 2 djacob users 4096 Mar 26 15:16 etc
drwxr-xr-x 2 djacob users 4096 Mar 26 15:06 scripts
drwxr-xr-x 2 djacob users 4096 Mar 26 15:29 tmp
drwxr-xr-x 7 djacob users 4096 Mar 26 15:27 www

[djacob@proticdb nmrview]$ chmod 777 tmp
[djacob@proticdb nmrview]$ chmod -R 777 ./www/log/

[djacob@proticdb nmrview]$ vi ./etc/nmrproc.conf 
--------------------------------------------------------------------------------------------------------------
# Warning: Take care not putting spaces each side of equal sign, in order to be executed as a script shell 
# VARNAME=anything including spaces

DEBUG=0

# The root of the bulk of your installation.
ROOTDIR=/mnt/var/sys/projets/nmrview

# The root of the datasets 
DATASETS=/mnt/var/sys/projets/nmrview/data

BASEURL=www.cbib.u-bordeaux2.fr
URLROOT=/SPECNMR

# default NMR spectrum parameters
SOLVENT_MIN=4.7
SOLVENT_MAX=4.97
PPM_MIN=-0.05
PPM_MAX=11

...

--------------------------------------------------------------------------------------------------------------

[djacob@proticdb nmrview]$ cd /var/www/html/
[djacob@proticdb nmrview]$ sudo ln -s /mnt/var/sys/projets/nmrview/www SPECNMR


////////////////////////////////////////////////////////////////////////

How to process with an ISA-TAB archive ?

////////////////////////////////////////////////////////////////////////

[djacob@proticdb nmrview]$ ll ./data/
total 4
drwxr-xr-x 4 djacob users 4096 Mar 26 14:56 HUGO07

[djacob@proticdb nmrview]$ ll ./data/HUGO07/
total 8
drwxr-xr-x 2 djacob users 4096 Mar 26 14:56 isatab
drwxr-xr-x 2 djacob users 4096 Mar 26 14:56 procs

[djacob@proticdb nmrview]$ ll ./data/HUGO07/isatab/
total 11472
-rw-r--r-- 1 djacob users 317389 Mar 26 14:56 BB_BBI_08M07_melon07_13091.zip
-rw-r--r-- 1 djacob users 317361 Mar 26 14:56 BB_BBI_08M07_melon07_13092.zip
-rw-r--r-- 1 djacob users 318559 Mar 26 14:56 BB_BBI_08M07_melon07_13101.zip
-rw-r--r-- 1 djacob users 318787 Mar 26 14:56 BB_BBI_08M07_melon07_13102.zip
-rw-r--r-- 1 djacob users 318251 Mar 26 14:56 BB_BBI_08M07_melon07_13111.zip
-rw-r--r-- 1 djacob users 318122 Mar 26 14:56 BB_BBI_08M07_melon07_13112.zip
-rw-r--r-- 1 djacob users 309234 Mar 26 14:56 BB_BBI_08M07_melon07_13121.zip
-rw-r--r-- 1 djacob users 318059 Mar 26 14:56 BB_BBI_08M07_melon07_13122.zip
-rw-r--r-- 1 djacob users 318926 Mar 26 14:56 BB_BBI_08M07_melon07_13131.zip
-rw-r--r-- 1 djacob users 309249 Mar 26 14:56 BB_BBI_08M07_melon07_13132.zip
-rw-r--r-- 1 djacob users 317804 Mar 26 14:56 BB_BBI_08M07_melon07_13141.zip
-rw-r--r-- 1 djacob users 318394 Mar 26 14:56 BB_BBI_08M07_melon07_13142.zip
-rw-r--r-- 1 djacob users 323837 Mar 26 14:56 BB_BBI_08M07_melon07_13151.zip
-rw-r--r-- 1 djacob users 325276 Mar 26 14:56 BB_BBI_08M07_melon07_13152.zip
-rw-r--r-- 1 djacob users 324708 Mar 26 14:56 BB_BBI_08M07_melon07_13161.zip
-rw-r--r-- 1 djacob users 323442 Mar 26 14:56 BB_BBI_08M07_melon07_13162.zip
-rw-r--r-- 1 djacob users 324762 Mar 26 14:56 BB_BBI_08M07_melon07_13171.zip
-rw-r--r-- 1 djacob users 323527 Mar 26 14:56 BB_BBI_08M07_melon07_13172.zip
-rw-r--r-- 1 djacob users 324286 Mar 26 14:56 BB_BBI_08M07_melon07_13181.zip
-rw-r--r-- 1 djacob users 322688 Mar 26 14:56 BB_BBI_08M07_melon07_13182.zip
-rw-r--r-- 1 djacob users 323630 Mar 26 14:56 BB_BBI_08M07_melon07_13191.zip
-rw-r--r-- 1 djacob users 324020 Mar 26 14:56 BB_BBI_08M07_melon07_13192.zip
-rw-r--r-- 1 djacob users 324789 Mar 26 14:56 BB_BBI_08M07_melon07_13201.zip
-rw-r--r-- 1 djacob users 324475 Mar 26 14:56 BB_BBI_08M07_melon07_13202.zip
-rw-r--r-- 1 djacob users 311251 Mar 26 14:56 BB_BBI_08M07_melon07_13331.zip
-rw-r--r-- 1 djacob users 316116 Mar 26 14:56 BB_BBI_08M07_melon07_13332.zip
-rw-r--r-- 1 djacob users 311180 Mar 26 14:56 BB_BBI_08M07_melon07_13341.zip
-rw-r--r-- 1 djacob users 314663 Mar 26 14:56 BB_BBI_08M07_melon07_13342.zip
-rw-r--r-- 1 djacob users 319548 Mar 26 14:56 BB_BBI_08M07_melon07_13351.zip
-rw-r--r-- 1 djacob users 317141 Mar 26 14:56 BB_BBI_08M07_melon07_13352.zip
-rw-r--r-- 1 djacob users 326022 Mar 26 14:56 BB_BBI_08M07_melon07_13361.zip
-rw-r--r-- 1 djacob users 324277 Mar 26 14:56 BB_BBI_08M07_melon07_13362.zip
-rw-r--r-- 1 djacob users 320622 Mar 26 14:56 BB_BBI_08M07_melon07_13371.zip
-rw-r--r-- 1 djacob users 310643 Mar 26 14:56 BB_BBI_08M07_melon07_13372.zip
-rw-r--r-- 1 djacob users 319364 Mar 26 14:56 BB_BBI_08M07_melon07_13381.zip
-rw-r--r-- 1 djacob users 319049 Mar 26 14:56 BB_BBI_08M07_melon07_13382.zip
-rw-r--r-- 1 djacob users   8414 Mar 26 14:56 a_hugo_2007_metabolite profiling_NMR spectroscopy.txt
-rw-r--r-- 1 djacob users  10906 Mar 26 14:56 i_Investigation.txt
-rw-r--r-- 1 djacob users   5023 Mar 26 14:56 s_Hugo_2007.txt

[djacob@proticdb nmrview]$ sh ./scripts/buildcsv.sh -d ./data/HUGO07/isatab/ -o samples.csv -v
i_Investigation.txt ... OK
s_Hugo_2007.txt ... OK
a_hugo_2007_metabolite profiling_NMR spectroscopy.txt ... OK
Extract columns from Study Assay File : 1,28 ...OK
Factors: ;Harvest date
Extract columns from Study File : 9,10 ... OK
Merging ...OK

[djacob@proticdb nmrview]$ sh ./scripts/init_bin.sh -i ./data/HUGO07/isatab/samples.csv -o ./data/HUGO07/procs/ -h
----------------------------
BB_BBI_08M07_melon07_13091 (1/36) ...
NAME = 07.HU1.1.1309.1
OK
----------------------------
BB_BBI_08M07_melon07_13092 (2/36) ...
NAME = 07.HU1.1.1309.2
OK
----------------------------
BB_BBI_08M07_melon07_13101 (3/36) ...
NAME = 07.HU1.2.1310.1
OK
----------------------------
BB_BBI_08M07_melon07_13102 (4/36) ...
NAME = 07.HU1.2.1310.2
OK

...

----------------------------
BB_BBI_08M07_melon07_13372 (34/36) ...
NAME = 07.HU3.5.1337.2
OK
----------------------------
BB_BBI_08M07_melon07_13381 (35/36) ...
NAME = 07.HU3.6.1338.1
OK
----------------------------
BB_BBI_08M07_melon07_13382 (36/36) ...
NAME = 07.HU3.6.1338.2
OK
Pack ...OK

[djacob@proticdb nmrview]$ ll ./data/HUGO07/procs/
total 9756
-rw-r--r-- 1 djacob users      28 Mar 26 15:03 factors
lrwxrwxrwx 1 djacob users      11 Mar 26 15:03 rawfile -> samples.csv
-rw-r--r-- 1 djacob users    1812 Mar 26 15:03 samples.csv
-rw-r--r-- 1 djacob users 9961496 Mar 26 15:04 specs.pack


